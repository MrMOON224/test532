
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>School Announcements - Admin</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; background: #f4f4f9; }
    h1 { color: #333; }
    .login, .admin-panel { max-width: 500px; margin: auto; padding: 20px; background: #fff; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    input, textarea, button { width: 100%; padding: 10px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #007bff; color: white; cursor: pointer; }
    button:hover { background: #0056b3; }
    .announcement { background: #e9ecef; padding: 10px; margin: 10px 0; border-radius: 5px; }
  </style>
</head>
<body>

<h1>Admin Panel - Announcements</h1>

<div class="login" id="loginBox">
  <h3>Admin Login</h3>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<div class="admin-panel" id="adminPanel" style="display:none;">
  <h3>Post New Announcement</h3>
  <input type="text" id="title" placeholder="Announcement Title">
  <textarea id="content" placeholder="Announcement Content"></textarea>
  <button onclick="postAnnouncement()">Post</button>

  <h3>Existing Announcements</h3>
  <div id="announcements"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<script>
  // ✅ Your Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyATgzeG9ak124o3rL6CdwfpLcApFy81zuU",
    authDomain: "school-eb97e.firebaseapp.com",
    projectId: "school-eb97e",
    storageBucket: "school-eb97e.firebasestorage.app",
    messagingSenderId: "1009963382013",
    appId: "1:1009963382013:web:49a6a3289f92cd6c5bfa94",
    measurementId: "G-7MCFP02KGG"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // ✅ Simple Login (hardcoded)
  function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    if(user === "admin" && pass === "1234") {
      document.getElementById("loginBox").style.display = "none";
      document.getElementById("adminPanel").style.display = "block";
      loadAnnouncements();
    } else {
      alert("Wrong username or password!");
    }
  }

  // ✅ Post Announcement
  function postAnnouncement() {
    const title = document.getElementById("title").value;
    const content = document.getElementById("content").value;

    if(title && content) {
      db.collection("announcements").add({
        title: title,
        content: content,
        timestamp: Date.now()
      });
      document.getElementById("title").value = "";
      document.getElementById("content").value = "";
    } else {
      alert("Please fill all fields.");
    }
  }

  // ✅ Load & Display Announcements
  function loadAnnouncements() {
    db.collection("announcements").orderBy("timestamp", "desc").onSnapshot(snapshot => {
      const list = document.getElementById("announcements");
      list.innerHTML = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "announcement";
        div.innerHTML = `
          <h4>${data.title}</h4>
          <p>${data.content}</p>
          <button onclick="deleteAnnouncement('${doc.id}')">Delete</button>
        `;
        list.appendChild(div);
      });
    });
  }

  // ✅ Delete Announcement
  function deleteAnnouncement(id) {
    db.collection("announcements").doc(id).delete();
  }
</script>

</body>
</html>
